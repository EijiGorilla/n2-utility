"use strict";(self.webpackChunkn2_utility=self.webpackChunkn2_utility||[]).push([[16563],{8445:(t,e,n)=>{n.d(e,{O:()=>i});var s=n(82103);class i extends s.d{getOperatorType(){return 4}execute(t,e,n,i){return!(0,s.r)(t,e,n,4,i)}}},16563:(t,e,n)=>{n.r(e),n.d(e,{execute:()=>p,isAsync:()=>f});var s=n(11217),i=n(49177),a=n(52847),r=n(81130),o=n(66388),l=n(98685),h=n(58067);function p(t){if(function(t){return null!=t.parentTemplate&&(0,r.Rg)(t.shape)}(t)&&"digitizing"!==t.mode)return async function(t){let{templatePart:e,parentTemplate:n,shape:o,edits:p,relationships:f,mode:g}=t;const{builderConfig:u}=e,m=(0,s.V2)(u),d=(0,s.YI)(u),y=(0,s.RT)(u),B=(0,s.Gr)(u,d),P=y||0===m?o:(0,i.cY)(o,m);if(null===P)return;const R=n.layer.createQuery();R.geometry=P,R.spatialRelationship="intersects",R.returnM=!0,R.returnZ=!0,R.outSpatialReference=P.spatialReference,R.cacheHint=!1,R.returnGeometry=!0,R.historicMoment=n.layer.historicMoment,R.gdbVersion=n.layer.gdbVersion;const S=2*((0,h.fromSpatialReference)(P.spatialReference)?.getTolerance()??.001);R.distance=S;const{features:A}=await n.layer.queryFeatures(R);if(0===A.length)return;const T=[];for(const s of A)T.push(c(s.geometry));const v=(0,s.TR)(P);let x=0,b=0;for(let i=0;i<P.paths.length&&!(p.length>r.Cg);i++){const t=P.paths[i].length;for(let n=0;n<t;n++){let r=P.getPoint(i,n);if(null!=r){for(const o of T)if((0,l.e)(r,o)){if(n>0&&0!==B&&(x+=P.hasZ?(0,a.Py)(P.paths[i][n-1],P.paths[i][n],v):(0,a.eS)(P.paths[i][n-1],P.paths[i][n])),0!==B){let e=1;if(d){const s=B<0?n-1:n+1;if(s>=t||s<0)return;e=P.hasZ?(0,a.Py)(P.paths[i][n],P.paths[i][s],v):(0,a.eS)(P.paths[i][n],P.paths[i][s])}const s=x+e*B;r=P.hasZ?(0,a.mw)(P,s,m,v):(0,a.a1)(P,s,m)}else 0!==m&&(r=(0,a.LB)(r,n===t-1?[P.paths[i][n-1],P.paths[i][n]]:[P.paths[i][n],P.paths[i][n+1]],m));r&&(0,s.fS)({templatePart:e,shape:r,edits:p,relationships:f,mode:g},`V${b.toString()}`);break}b++}}}}(t)}function c(t){const e=[];for(const n of t.paths)for(const t of n)e.push([...t]);return new o.default({spatialReference:t.spatialReference,points:e})}const f=!0},49177:(t,e,n)=>{n.d(e,{Ii:()=>s,LT:()=>u,cY:()=>f,nI:()=>i,tr:()=>c});var s,i,a,r=n(11217),o=n(52847),l=n(81130),h=n(70968),p=n(19902);function c(t){let{templatePart:e,edits:n,relationships:i,shape:a,distance:h,isProportional:c,offsetDistance:g,vertexBeforeOffset:u,vertexPlacement:m,mode:d}=t;const y=u||0===g?a:f(a,g);if(null===y||!(0,p.isPolyline)(y))return;const B=(0,r.TR)(y);g=u?g:0;let P=0,R=null,S=0;for(let p=0;p<y.paths.length;p++){if(n.length>l.Cg&&"digitizing"===d)return;const t=y.paths[p].length,a=p===y.paths.length-1;for(let f=0;f<t;f++){if(n.length>l.Cg&&"digitizing"===d)return;if(f>0&&0!==h&&(P+=y.hasZ?(0,o.Py)(y.paths[p][f-1],y.paths[p][f],B):(0,o.eS)(y.paths[p][f-1],y.paths[p][f])),(0!==f||m!==s.NotBeginning)&&!(f===t-1&&m===s.NotEnd&&a||(0===f||f===t-1&&a)&&m===s.Interior||0===f&&h<0&&c||f===t-1&&h>0&&c)){if(0!==h){let e=1;if(c){const n=h<0?f-1:f+1;if(n>=t||n<0)continue;e=y.hasZ?(0,o.Py)(y.paths[p][f],y.paths[p][n],B):(0,o.eS)(y.paths[p][f],y.paths[p][n])}const n=P+e*h;R=y.hasZ?(0,o.mw)(y,n,g,B):(0,o.a1)(y,n,0)}else R=(0,o.RT)(y,p,f),0!==g&&(R=(0,o.LB)(R,f===t-1?[y.paths[p][f-1],y.paths[p][f]]:[y.paths[p][f],y.paths[p][f+1]],g));R&&(0,r.fS)({templatePart:e,shape:R,edits:n,relationships:i,mode:d},`V${(S+f).toString()}`)}}S+=t}}function f(t,e){return(0,h.e)(t,e,{unit:"meters",joins:"miter",miterLimit:2})}function g(t){let e=0;for(const n of t.paths)e+=n.length;return e}function u(t){let{templatePart:e,edits:n,relationships:s,shape:a,distance:l,isProportional:h,offsetDistance:c,vertexBeforeOffset:u,vertexPlacement:m,mode:d}=t;const y=u||0===c?a:f(a,c);if(null===y||!(0,p.isPolyline)(y))return;const B=(0,r.TR)(y);c=u?c:0;let P=null,R="";if(0!==l){const t=m===i.AtBeginning?0:y.paths.length-1,e=m===i.AtBeginning?0:y.paths[y.paths.length-1].length-1,n=m===i.AtBeginning?0:(0,o.Ex)(y),s=m===i.AtBeginning?y.paths[0].length:y.paths[y.paths.length-1].length;let a=1;if(h){const n=l<0?e-1:e+1;if(n>=s||n<0)return;a=y.hasZ?(0,o.Py)(y.paths[t][e],y.paths[t][n],B):(0,o.eS)(y.paths[t][e],y.paths[t][n])}const r=n+a*l;P=y.hasZ?(0,o.mw)(y,r,c,B):(0,o.a1)(y,r,c),R=m===i.AtBeginning?"V0":`V${(g(y)-1).toString()}`}else{if(P=m===i.AtBeginning?(0,o.RT)(y,0,0):(0,o.RT)(y,y.paths.length-1,y.paths[y.paths.length-1].length-1),0!==c)if(m===i.AtBeginning)P=(0,o.LB)(P,[y.paths[0][0],y.paths[0][1]],c);else{const t=y.paths[y.paths.length-1];P=(0,o.LB)(P,[t[t.length-2],t[t.length-1]],c)}R=m===i.AtBeginning?"V0":`V${(g(y)-1).toString()}`}P&&(0,r.fS)({templatePart:e,shape:P,edits:n,relationships:s,mode:d},R)}(a=s||(s={}))[a.All=0]="All",a[a.NotBeginning=1]="NotBeginning",a[a.NotEnd=2]="NotEnd",a[a.Interior=3]="Interior",function(t){t[t.AtBeginning=4]="AtBeginning",t[t.AtEnd=5]="AtEnd"}(i||(i={}))},98685:(t,e,n)=>{n.d(e,{a:()=>r,e:()=>o,i:()=>h,s:()=>l});var s=n(8445),i=n(58067);const a=new s.O;function r(t){const e=(0,i.getSpatialReference)(t);return a.accelerateGeometry((0,i.fromGeometry)(t),(0,i.fromSpatialReference)(e),1)}function o(t,e){return a.execute((0,i.fromGeometry)(t),(0,i.fromGeometry)(e),(0,i.fromSpatialReference)(t.spatialReference),null)}const l=a.supportsCurves(),h=Object.freeze(Object.defineProperty({__proto__:null,accelerateGeometry:r,execute:o,supportsCurves:l},Symbol.toStringTag,{value:"Module"}))}}]);
//# sourceMappingURL=16563.cd47d605.chunk.js.map