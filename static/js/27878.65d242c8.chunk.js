"use strict";(self.webpackChunkn2_utility=self.webpackChunkn2_utility||[]).push([[27878],{28320:(t,e,n)=>{n.r(e),n.d(e,{default:()=>w});var i,o=n(35143),r=n(3825),s=n(50076),a=n(16770),l=n(90534),c=n(49723),u=n(46053),h=(n(81806),n(76460),n(47249),n(28379)),m=n(85842),d=n(17707),g=n(83622),p=n(62705),f=n(95474),v=n(6446),y=n(79453);let I=class extends g.A{constructor(t){super(t),this.animationOptions=null,this.content=null,this.image=null,this.type="image",this[i]=!0,this.image=null}load(){const t=this.image;if("string"==typeof t){const e=(0,a.M5)(t).then((t=>{this._set("content",t)}));this.addResolvingPromise(e)}else if(t instanceof HTMLImageElement){const e=t.decode().then((()=>{this._set("content",t)}));this.addResolvingPromise(e)}else t?this._set("content",t):this.addResolvingPromise(Promise.reject(new s.default("image-element:invalid-image-type","Invalid image type",{image:t})));return Promise.resolve(this)}get contentWidth(){return null==this.content?0:this.content instanceof HTMLImageElement?this.content.naturalWidth:this.content.width}get contentHeight(){return null==this.content?0:this.content instanceof HTMLImageElement?this.content.naturalHeight:this.content.height}readImage(t,e,n){return(0,y.f)(e.url,n)}writeImage(t,e,n,i){if(null==t)return;const o=i?.portalItem,s=i?.resources;if(!o||!s)return void("string"==typeof t&&(e[n]=(0,y.t)(t,i)));const a=function(t){return"string"==typeof t&&!(0,l.isDataProtocol)(t)&&!(0,l.isBlobProtocol)(t)}(t)?t:null;if(a){if(null==(0,y.i)(a))return void(e[n]=a);const t=(0,y.t)(a,{...i,verifyItemRelativeUrls:i?.verifyItemRelativeUrls?{writtenUrls:i.verifyItemRelativeUrls.writtenUrls,rootPath:void 0}:void 0},y.M.NO);if(o&&t&&!(0,l.isAbsolute)(t))return s.toKeep.push({resource:o.resourceFromPath(t),compress:!1}),void(e[n]=t)}e[n]="<pending>",s.pendingOperations.push(async function(t){if("string"==typeof t)return(0,l.isDataProtocol)(t)?(0,l.dataToBlob)(t):(await(0,r.default)(t,{responseType:"blob"})).data;return new Promise((e=>function(t){if(t instanceof HTMLCanvasElement)return t;const e=t instanceof HTMLImageElement?t.naturalWidth:t.width,n=t instanceof HTMLImageElement?t.naturalHeight:t.height,i=document.createElement("canvas"),o=i.getContext("2d");return i.width=e,i.height=n,t instanceof HTMLImageElement?o.drawImage(t,0,0,t.width,t.height):t instanceof ImageData&&o.putImageData(t,0,0),i}(t).toBlob(e)))}(t).then((t=>{const i=function(t,e){const n=(0,c.lk)(),i=`${(0,l.join)("media",n)}.${(0,f.n)({type:"blob",blob:t})}`;return e.resourceFromPath(i)}(t,o);e[n]=i.itemRelativeUrl,s.toAdd.push({resource:i,content:{type:"blob",blob:t},compress:!1,finish:t=>{this.image=t.url}})})))}};i=v.Of,(0,o._)([(0,u.MZ)()],I.prototype,"animationOptions",void 0),(0,o._)([(0,u.MZ)({readOnly:!0})],I.prototype,"content",void 0),(0,o._)([(0,u.MZ)({readOnly:!0})],I.prototype,"contentWidth",null),(0,o._)([(0,u.MZ)({readOnly:!0})],I.prototype,"contentHeight",null),(0,o._)([(0,u.MZ)(p.x3)],I.prototype,"image",void 0),(0,o._)([(0,h.w)("image",["url"])],I.prototype,"readImage",null),(0,o._)([(0,d.K)("image")],I.prototype,"writeImage",null),(0,o._)([(0,u.MZ)(p.m$)],I.prototype,"type",void 0),I=(0,o._)([(0,m.$)("esri.layers.support.ImageElement")],I);const w=I},33723:(t,e,n)=>{n.d(e,{O:()=>m,W:()=>h});var i=n(63919),o=n(44680),r=n(19555),s=n(20664);const a=(0,n(9392).vt)(),l=(0,o.vt)(),c=(0,o.vt)(),u=(0,o.vt)();function h(t,e,n){return(0,s.i)(a,e[0],e[1],1),(0,s.q)(a,a,(0,i.mg)(l,n)),0===a[2]?(0,r.hZ)(t,a[0],a[1]):(0,r.hZ)(t,a[0]/a[2],a[1]/a[2])}function m(t,e,n){return d(c,e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]),d(u,n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7]),(0,i.lw)(t,(0,i.KC)(c,c),u),0!==t[8]&&(t[0]/=t[8],t[1]/=t[8],t[2]/=t[8],t[3]/=t[8],t[4]/=t[8],t[5]/=t[8],t[6]/=t[8],t[7]/=t[8],t[8]/=t[8]),t}function d(t,e,n,o,r,c,u,h,m){(0,i.hZ)(t,e,o,c,n,r,u,1,1,1),(0,s.i)(a,h,m,1),(0,i.KC)(l,t);const[d,g,p]=(0,s.q)(a,a,(0,i.mg)(l,l));return(0,i.hZ)(l,d,0,0,0,g,0,0,0,p),(0,i.lw)(t,l,t)}}}]);
//# sourceMappingURL=27878.65d242c8.chunk.js.map