"use strict";(self.webpackChunkn2_utility=self.webpackChunkn2_utility||[]).push([[8380],{25213:(e,t,a)=>{a.d(t,{E9:()=>f,Tw:()=>c,X6:()=>m});var i=a(3825),n=a(76797),l=a(19247),r=a(13312),s=a(41882),o=a(49653),u=a(54994),d=a(77725);async function p(e,t,a){const p=(0,u.Dl)(e),{rasterFunction:c,sourceJSON:m}=t||{},f=c?JSON.stringify(c.rasterFunctionDefinition||c):null,h=(0,u.lF)({...p.query,renderingRule:f,f:"json"}),y=(0,u.jV)(h,a);e=p.path;const v=m||await(0,i.default)(e,y).then((e=>e.data)),g=v.hasRasterAttributeTable?(0,i.default)(`${e}/rasterAttributeTable`,y):null,b=v.hasColormap?(0,i.default)(`${e}/colormap`,y):null,x=v.hasHistograms?(0,i.default)(`${e}/histograms`,y):null,w=v.currentVersion>=10.3?(0,i.default)(`${e}/keyProperties`,y):null,R=v.hasMultidimensions?(0,i.default)(`${e}/multidimensionalInfo`,y):null,S=await Promise.allSettled([g,b,x,w,R]);let M=null;if(v.minValues&&v.minValues.length===v.bandCount){M=[];for(let e=0;e<v.minValues.length;e++)M.push({min:v.minValues[e],max:v.maxValues[e],avg:v.meanValues[e],stddev:v.stdvValues[e]})}const V=n.default.fromJSON(v.extent),D=Math.ceil(V.width/v.pixelSizeX-.1),T=Math.ceil(V.height/v.pixelSizeY-.1),I=r.default.fromJSON(v.spatialReference||v.extent.spatialReference),N="fulfilled"===S[0].status?S[0].value?.data:null,j=N?.features?.length?d.default.fromJSON(N):null,P="fulfilled"===S[1].status?S[1].value?.data.colormap:null,_=P?.length?P:null,k="fulfilled"===S[2].status?S[2].value?.data.histograms:null,C=k?.[0]?.counts?.length?k:null,O="fulfilled"===S[3].status?S[3].value?.data??{}:{},J="fulfilled"===S[4].status?S[4].value?.data.multidimensionalInfo:null,Z=J?.variables?.length?J:null;Z&&Z.variables.forEach((e=>{e.statistics?.length&&e.statistics.forEach((e=>{e.avg=e.mean,e.stddev=e.standardDeviation})),e.dimensions?.forEach((e=>{"StdTime"!==e.name||e.recurring||e.unit||(e.unit="ISO8601")}))}));const{defaultVariable:$,serviceDataType:z}=v;$&&$!==O.DefaultVariable&&(O.DefaultVariable=$),z?.includes("esriImageServiceDataTypeVector")&&!z.includes(O.DataType)&&(O.DataType=z.replace("esriImageServiceDataType",""));let A=v.noDataValue;v.noDataValues?.length&&v.noDataValues.some((e=>e!==A))&&(A=v.noDataValues);const F=v.transposeInfo?new o.A({blockWidth:256,blockHeight:256,pyramidBlockWidth:256,pyramidBlockHeight:256,pyramidScalingFactor:2,compression:"lerc",origin:new l.default({x:v.extent.xmin,y:v.extent.ymax,spatialReference:I}),firstPyramidLevel:1,maximumPyramidLevel:Math.max(0,Math.round(Math.log(Math.max(D,T))/Math.LN2-8)),transposeInfo:v.transposeInfo}):void 0;return new s.default({width:D,height:T,bandCount:v.bandCount,extent:n.default.fromJSON(v.extent),spatialReference:I,pixelSize:new l.default({x:v.pixelSizeX,y:v.pixelSizeY,spatialReference:I}),pixelType:v.pixelType.toLowerCase(),statistics:M,attributeTable:j,colormap:_,histograms:C,keyProperties:O,noDataValue:A,multidimensionalInfo:Z,storageInfo:F})}function c(e,t,a){return p(e,{sourceJSON:t},a)}function m(e,t,a){return p(e,{rasterFunction:t},a)}function f(e,t){e.attributeTable||(t.hasRasterAttributeTable=!1),e.histograms||(t.hasHistograms=!1),e.colormap||(t.hasColormap=!1),e.multidimensionalInfo||(t.hasMultidimensions=!1)}},26324:(e,t,a)=>{a.d(t,{H:()=>s});var i=a(35143),n=a(46053),l=(a(81806),a(76460),a(47249),a(85842)),r=a(45378);const s=e=>{let t=class extends e{constructor(){super(...arguments),this.activePresetRendererName=null,this.presetRenderers=null}};return(0,i._)([(0,n.MZ)({type:String,json:{name:"layerDefinition.activePresetRendererName",write:{allowNull:!0}}})],t.prototype,"activePresetRendererName",void 0),(0,i._)([(0,n.MZ)({type:[r.default],json:{name:"layerDefinition.presetRenderers",write:!0}})],t.prototype,"presetRenderers",void 0),t=(0,i._)([(0,l.$)("esri.layers.mixins.RasterPresetRendererMixin")],t),t}},45378:(e,t,a)=>{a.r(t),a.d(t,{default:()=>c});var i=a(35143),n=a(69098),l=a(42553),r=a(46053),s=a(40565),o=(a(81806),a(47249),a(6409)),u=a(85842),d=a(88205);let p=class extends(n.A.ClonableMixin(l.A)){constructor(e){super(e),this.name=void 0,this.method="none",this.value=void 0,this.bandIds=void 0,this.renderer=void 0}};(0,i._)([(0,r.MZ)({type:String,json:{write:{isRequired:!0}}})],p.prototype,"name",void 0),(0,i._)([(0,r.MZ)({type:["raster-function-template","variable","none"],json:{write:{isRequired:!0}}}),(0,o.e)({rasterFunctionTemplate:"raster-function-template",variable:"variable",none:"none"})],p.prototype,"method",void 0),(0,i._)([(0,r.MZ)({type:String,json:{write:{isRequired:!0}}})],p.prototype,"value",void 0),(0,i._)([(0,r.MZ)({type:[s.jz],json:{write:{isRequired:!0}}})],p.prototype,"bandIds",void 0),(0,i._)([(0,r.MZ)({types:d.uy,json:{write:!0,origins:{"web-scene":{types:d.Gj,write:{overridePolicy:e=>({enabled:e&&"vector-field"!==e.type&&"flow"!==e.type})}}}}})],p.prototype,"renderer",void 0),p=(0,i._)([(0,u.$)("esri.renderers.support.RasterPresetRenderer")],p);const c=p}}]);
//# sourceMappingURL=8380.d1678024.chunk.js.map