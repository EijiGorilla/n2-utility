{"version":3,"file":"static/js/8163.7bdb6f66.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/rest/sharedTemplates/querySharedTemplates.js","../node_modules/@arcgis/core/rest/featureService/FeatureService.js","../node_modules/@arcgis/core/editing/sharedTemplates/support/toolNames.js","../node_modules/@arcgis/core/layers/graphics/applyEditsUtils.js","../node_modules/@arcgis/core/editing/sharedTemplates/SharedTemplateMetadata.js","../node_modules/@arcgis/core/layers/graphics/editingSupport.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport e from\"../../request.js\";import r from\"../../core/Error.js\";import{join as t}from\"../../core/urlUtils.js\";async function s({serviceUrl:s,query:l,requestOptions:o={}}){if(null==l.layers&&null==l.templateIds)throw new r(\"query-shared-templates:invalid-parameters\",\"Must supply a value for either the 'layers' or the 'templateIds' parameters\");const p=t(s,\"sharedTemplates\",\"query\"),n={f:\"json\",...o.query,...l};n.layers&&(n.layers=a(n.layers)),n.templateIds&&(n.templateIds=a(n.templateIds)),n.tags&&(n.tags=a(n.tags));const u={...o,responseType:\"json\",query:n};return(await e(p,u)).data.templates}function a(e){return Array.isArray(e)?e.join(\",\"):\"\"}export{s as querySharedTemplates};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import t from\"../../config.js\";import{id as s}from\"../../kernel.js\";import r from\"../../request.js\";import{isSome as i}from\"../../core/arrayUtils.js\";import a from\"../../core/Error.js\";import o from\"../../core/Identifiable.js\";import n from\"../../core/JSONSupport.js\";import{clone as l}from\"../../core/lang.js\";import u from\"../../core/Loadable.js\";import{throwIfAborted as p,throwIfAbortError as d}from\"../../core/promiseUtils.js\";import{property as c}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import{reader as m}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as y}from\"../../core/accessorSupport/decorators/subclass.js\";import h from\"../../editing/sharedTemplates/SharedTemplateMetadata.js\";import f from\"../../geometry/SpatialReference.js\";import{getFeatureJSON as g,getFeatureIds as v,getAttachmentEditsJSON as b,isProtectedOrPrivateVersionError as S,unpackEditResultData as E,createEditedFeatures as j}from\"../../layers/graphics/applyEditsUtils.js\";import{checkEditingCapabilities as w,normalizeEdits as I,normalizeGeometries as F}from\"../../layers/graphics/editingSupport.js\";import{emitApplyEditsEvent as R}from\"../../layers/mixins/EditBusLayer.js\";import{ensureCredentialIfSignedIn as A}from\"../../layers/support/featureLayerUtils.js\";import{getOwningPortalUrl as T}from\"../../layers/support/layerUtils.js\";import{getFeatureLayerCapabilities as U}from\"../../layers/support/serviceCapabilitiesUtils.js\";import C from\"../../portal/PortalItem.js\";import{getUserPrivileges as O}from\"../../portal/support/portalItemUtils.js\";import{isSecureProxyService as D}from\"../../portal/support/urlUtils.js\";import{parseUrl as P,asValidOptions as V,encode as k}from\"../utils.js\";import{unapplyEditsZUnitScaling as M}from\"../query/operations/editsZScale.js\";import{querySharedTemplates as N}from\"../sharedTemplates/querySharedTemplates.js\";import{readBoolean as q,readNumber as L}from\"../support/jsonUtils.js\";import{isSafeToEditVersion as _,isVersionInEditSession as x,currentSessionId as J}from\"../../versionManagement/support/versionManagementUtils.js\";function Q(e,t){const s=t.id;return{id:s,name:t.name,url:`${e}/${s}`,type:t.type||\"Table\"}}function W(e){return{data:H(e),sync:z(e),operations:B(e.capabilities,e),query:$(e),editing:G(e)}}function H(e){return{isDataVersioned:q(e,\"hasVersionedData\",!1),isDataBranchVersioned:q(e,\"hasBranchVersionedData\",!1)}}function B(e,t){const s=e?e.toLowerCase().split(\",\").map((e=>e.trim())):[],r=s.includes(\"query\"),i=s.includes(\"editing\")&&!t.datesInUnknownTimezone;let a=i&&s.includes(\"create\"),o=i&&s.includes(\"delete\"),n=i&&s.includes(\"update\");return i&&!(a||o||n)&&(a=o=n=!0),{supportsAdd:a,supportsDelete:o,supportsEditing:i,supportsChangeTracking:s.includes(\"changetracking\"),supportsQuery:r,supportsQueryDataElements:q(t,\"supportsQueryDataElements\",!1),supportsQueryDomains:q(t,\"supportsQueryDomains\",!1),supportsQueryContingentValues:q(t,\"supportsQueryContingentValues\",!1),supportsSync:s.includes(\"sync\"),supportsUpdate:n}}function $(e){return{maxRecordCountFactor:L(e,\"maxRecordCountFactor\",void 0),maxRecordCount:L(e,\"maxRecordCount\",void 0)}}function G(e){const t=e?.advancedEditingCapabilities;return{supportsAsyncApplyEdits:q(t,\"supportsAsyncApplyEdits\",!1),supportsGlobalId:q(e,\"supportsApplyEditsWithGlobalIds\",!1),supportsReturnServiceEditsInSourceSpatialReference:q(t,\"supportsReturnServiceEditsInSourceSR\",!1),supportsSharedTemplates:q(e,\"hasSharedTemplates\",!1),supportsSplit:q(t,\"supportsSplit\",!1)}}function z(e){const t=e?.syncCapabilities,s=t?.supportedSyncDataOptions;return{supportsAsync:q(t,\"supportsAsync\",!1),supportedSyncDataOptions:{annotations:!(1&~s),dimensions:!(2&~s),contingentValues:!(4&~s),attributeRules:!(8&~s),utilityNetworkSystem:!(16&~s),annotationFullModel:!(32&~s),include3DObjects:!(64&~s),utilityNetworkMissingLayers:!(128&~s),preserveTrueCurves:!(256&~s)}}}let Z=class extends(n.JSONSupportMixin(o.IdentifiableMixin(u))){constructor(e){super(e),this.url=null,this.sourceJSON=null,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1,this.userTypeExtensions=[],this.layerInfos=null,this.tableInfos=null,this.capabilities=null}read(e,t){this.sourceJSON=e,super.read(e,t)}get utilityNetworkUrl(){if(this.sourceJSON)for(const e of this.sourceJSON.layers)if(\"Utility Network Layer\"===e.type)return`${this.url}/${e.id}`;return null}get versionManagementServiceUrl(){return this.sourceJSON?.hasBranchVersionedData&&!D(this.url)?this.url.replace(/\\/FeatureServer/i,\"/VersionManagementServer\"):null}readLayerInfos(e,t){return(t.layers||[]).map((e=>{const{type:t,geometryType:s}=e;return{...Q(this.url,e),type:t||\"Feature Layer\",geometryType:s}}))}readTableInfos(e,t){return(t.tables||[]).map((e=>Q(this.url,e)))}readCapabilities(e,t){return W(t)}get effectiveCapabilities(){const e=this.capabilities;if(!e)return null;const t=l(e),{operations:s}=t;return this.userHasUpdateItemPrivileges?(s.supportsAdd=s.supportsDelete=s.supportsEditing=s.supportsQuery=s.supportsUpdate=!0,t):(this.userHasFullEditingPrivileges&&s.supportsEditing&&(s.supportsAdd=s.supportsDelete=s.supportsUpdate=!0),t)}load(e){return this.addResolvingPromise(this._fetchService(this.url,e).then((()=>this._setUserPrivileges(e)))),Promise.resolve(this)}async fetchAllLayersAndTables(e){return await this.load(e),this._fetchLayersAndTablesPromise||=this._fetchLayersAndTables(this.url),p(e),this._fetchLayersAndTablesPromise}async applyEdits(e,t){let s=null;try{const{results:r,edits:i,editedFeatures:a}=await this._internalApplyEdits(e,t),o=e=>e.filter((e=>!e.error)).map(l);let n=0;return r.map((e=>{s=R(this.url,e.id,t?.gdbVersion,!0);const r={edits:i[n],addedFeatures:o(e.addFeatureResults),updatedFeatures:o(e.updateFeatureResults),deletedFeatures:o(e.deleteFeatureResults),addedAttachments:o(e.addAttachmentResults),updatedAttachments:o(e.updateAttachmentResults),deletedAttachments:o(e.deleteAttachmentResults),exceededTransferLimit:!1,historicMoment:e.editMoment?new Date(e.editMoment):null};n+=1,a.length>0&&(r.editedFeatures=a),s.resolve(r),s=null})),r}catch(r){throw s&&s.reject(r),r}}async querySharedTemplates(e){const t={...e?.query};null==t.layers&&null==t.templateIds&&(t.layers=this.layerInfos.map((e=>e.id)));return(await N({serviceUrl:this.url,query:t,requestOptions:e?.requestOptions})).map((e=>{const t=h.fromJSON(e);return t.featureService=this,t}))}async _setUserPrivileges(e){if(t.userPrivilegesApplied)try{const{features:{fullEdit:t},content:{updateItem:s}}=await this._fetchUserPrivileges(this.sourceJSON.serviceItemId,e);this._set(\"userHasFullEditingPrivileges\",t),this._set(\"userHasUpdateItemPrivileges\",s)}catch(s){d(s)}}async _fetchUserPrivileges(e,t){const r=!0,i=!1,a=!1;if(!e)return{features:{edit:r,fullEdit:i},content:{updateItem:a}};let o,n,l;try{o=await T(this.url,t)}catch(u){d(u)}try{const e=null!=t?t.signal:null;n=await(s?.getCredential(`${o}/sharing`,{prompt:!1,signal:e}))}catch(u){d(u)}if(!n)return{features:{edit:r,fullEdit:i},content:{updateItem:a}};try{if(l=new C({id:e,portal:{url:o}}),await l.load(t),l.portal.user)return O(l)}catch(u){d(u)}return{features:{edit:r,fullEdit:i},content:{updateItem:a}}}async _internalApplyEdits(e,t){await A(this.url);const s=t?.globalIdUsed??!1,a=f.fromJSON(this.sourceJSON.spatialReference),{edits:o,options:n}=await this._processApplyEditsParams(e,t),l=await Promise.all(o.map((async e=>{const t=e.addFeatures?.map((e=>g({spatialReference:a},e,null)))??[],r=(await Promise.all(t)).filter(i),o=r.length>0?r:null,n=e.updateFeatures?.map((e=>g({spatialReference:a},e,null)))??[],l=(await Promise.all(n)).filter(i),u=l.length>0?l:null,p=v(e.identifierFields,e.deleteFeatures,s),d=p.length>0?p:null;M(o,u,a);const c=await b(e.identifierFields,e);let m=null;if(c){m={adds:c.adds.length>0?c.adds:void 0,updates:c.updates.length>0?c.updates:void 0,deletes:c.deletes.length>0?c.deletes:void 0}}return{id:e.id,adds:o,updates:u,deletes:d,attachments:m}}))),u={gdbVersion:n?.gdbVersion,rollbackOnFailure:!0,useGlobalIds:s,returnEditMoment:!0,honorSequenceOfEdits:n?.honorSequenceOfEdits,usePreviousEditMoment:n?.usePreviousEditMoment,returnServiceEditsInSourceSR:!1,returnServiceEditsOption:\"originalAndCurrentFeatures\",async:!1};await _(this.url,t?.gdbVersion,!0);const p=x(this.url,t?.gdbVersion||null);u.edits=JSON.stringify(l);const d=P(this.url),c=V(d.query,{query:k({...u,f:\"json\"}),method:\"post\"});let m;p&&(c.authMode=\"immediate\",c.query.sessionId=J);try{m=await r(this.url+\"/applyEdits\",c)}catch(y){if(!S(y))throw y;c.authMode=\"immediate\",m=await r(this.url+\"/applyEdits\",c)}return{...K(m),edits:o}}async _processApplyEditsParams(e,t){const s={...t,usingFeatureServiceEndpoint:!0};return{edits:await Promise.all(e.map((async e=>{const t=this.effectiveCapabilities,r=e&&(e.addFeatures||e.updateFeatures||e.deleteFeatures),i=e&&(e.addAttachments||e.updateAttachments||e.deleteAttachments);if(w(e,t,s,!!r,!!i,\"feature-service\"),!t.data.isDataVersioned&&s?.gdbVersion)throw new a(\"feature-service:invalid-parameter\",\"'gdbVersion' is applicable only if the layer supports versioned data. See: 'capabilities.data.isDataVersioned'\");const o=I(e,t,\"feature-service\");return{...await F(o),id:e.id,identifierFields:e.identifierFields}}))),options:s}}async _fetchService(e,t){if(this.sourceJSON)return void this.read(this.sourceJSON,{url:P(e)});const s=await r(e,{responseType:\"json\",query:{f:\"json\"},...t});this.read(s.data,{url:P(e)})}async _fetchLayersAndTables(e){const t=`${e}/layers`,s=await r(t,{responseType:\"json\",query:{f:\"json\"}});return{layers:s.data.layers.map((e=>{const{type:t,geometryType:s}=e,r=Q(this.url,e),i=U(e,r.url);return{...r,type:t||\"Feature Layer\",geometryType:s,capabilities:i}})),tables:s.data.tables.map((e=>{const t=Q(this.url,e),s=U(e,t.url);return{...t,capabilities:s}}))}}};function K(e){const t=e.data,s=[];return{results:t.map((e=>{const t={addResults:e.addResults??[],updateResults:e.updateResults??[],deleteResults:e.deleteResults??[],attachments:e.attachments,editMoment:e.editMoment},r=E(t),i=e.editedFeatures,a=i?.spatialReference?new f({wkid:i?.spatialReference.wkid,wkt:i?.spatialReference.wkt,latestWkid:i?.spatialReference.latestWkid,latestVcsWkid:i?.spatialReference.latestVcsWkid,vcsWkid:i?.spatialReference.vcsWkid}):null,o=i?j(i,a):null;return o&&s.push({layerId:e.id,editedFeatures:o}),{id:e.id,editedFeatures:o,...r}})),editedFeatures:s}}e([c()],Z.prototype,\"url\",void 0),e([c()],Z.prototype,\"sourceJSON\",void 0),e([c()],Z.prototype,\"userHasFullEditingPrivileges\",void 0),e([c()],Z.prototype,\"userHasUpdateItemPrivileges\",void 0),e([c({readOnly:!0})],Z.prototype,\"utilityNetworkUrl\",null),e([c({readOnly:!0})],Z.prototype,\"versionManagementServiceUrl\",null),e([c()],Z.prototype,\"userTypeExtensions\",void 0),e([c({json:{read:{source:[\"layers\"]}}})],Z.prototype,\"layerInfos\",void 0),e([m(\"layerInfos\",[\"layers\"])],Z.prototype,\"readLayerInfos\",null),e([c({json:{read:{source:[\"tables\"]}}})],Z.prototype,\"tableInfos\",void 0),e([m(\"tableInfos\",[\"tables\"])],Z.prototype,\"readTableInfos\",null),e([c({readOnly:!0,json:{read:{source:[\"hasVersionedData\",\"hasSharedTemplates\",\"hasBranchVersionedData\",\"capabilities\",\"supportsQueryDataElements\",\"supportsQueryDomains\",\"supportsQueryContingentValues\",\"maxRecordCountFactor\",\"maxRecordCount\",\"advancedEditingCapabilities\",\"supportsApplyEditsWithGlobalIds\",\"syncCapabilities\",\"datesInUnknownTimezone\"]}}})],Z.prototype,\"capabilities\",void 0),e([m(\"capabilities\",[\"hasVersionedData\",\"hasSharedTemplates\",\"hasBranchVersionedData\",\"capabilities\",\"supportsQueryDataElements\",\"supportsQueryDomains\",\"supportsQueryContingentValues\",\"maxRecordCountFactor\",\"maxRecordCount\",\"advancedEditingCapabilities\",\"supportsApplyEditsWithGlobalIds\",\"syncCapabilities\",\"datesInUnknownTimezone\"])],Z.prototype,\"readCapabilities\",null),e([c({readOnly:!0})],Z.prototype,\"effectiveCapabilities\",null),Z=e([y(\"esri.rest.featureService.FeatureService\")],Z);const X=Z;export{X as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{JSONMap as e}from\"../../../core/jsonMap.js\";const c=new e({\"{acd53634-cbc7-44d5-bde9-692fa8d45850}\":\"autocomplete-freehand-polygons\",\"{6f5fc612-d1ef-4d32-a2e1-18a1cb22331c}\":\"autocomplete-polygons\",\"{09c6f589-a3ce-48ab-81bc-46965c58f264}\":\"circle\",\"{bccf295a-9c64-4adc-903e-62d827c10ef7}\":\"create-points-along-line\",\"{756cadf6-91e6-04b1-2938-e172a97af51c}\":\"create-structures\",\"{ddbe4c0c-063f-8b60-b2da-b349a1e42e84}\":\"difference-polygon\",\"{a5f4db5f-4a6b-29bd-1f32-9d81bf262c76}\":\"elevation-point-from-contour\",\"{285ec4bb-60a8-7184-2088-5bee2149f2a4}\":\"elevation-point-from-dem\",\"{28c04532-3daf-4d3d-b7be-a589c9c9a03e}\":\"ellipse\",\"{0a7c16b9-1cfd-467f-8ece-6ba376192431}\":\"freehand\",\"{af2dbf8f-280e-44db-8860-e399d0b30cf1}\":\"line\",\"{bc485127-2ea2-4c8b-85ef-e8237959eb64}\":\"multipoint\",\"{d304243a-5c3a-4ccc-b98b-93684b15fd83}\":\"parcel-seed\",\"{2a8b3331-5238-4025-972e-452a69535b06}\":\"point\",\"{d376f8e5-69e0-4273-9478-724e9e0d81ac}\":\"point-and-rotation\",\"{93ce7077-f09e-455e-ade7-b7413cddc393}\":\"point-at-end-of-line\",\"{8f79967b-66a0-4a1c-b884-f44bc7e26921}\":\"polygon\",\"{a947ba80-1c29-4bcd-8672-1963b7b9dde0}\":\"radial-line\",\"{6f0ed2cc-c099-4895-bd7e-beec2f78adbf}\":\"rectangle\",\"{a281e635-0f22-47d4-a438-e4d29b920e22}\":\"regular-polygon\",\"{5664cae4-c7de-432a-9933-9586bc15ed39}\":\"regular-polyline\",\"{c5c42e29-44da-4a1c-8688-e02c07535bc3}\":\"right-angle-line\",\"{ee16991b-6303-4a8a-9143-1914b2010c1a}\":\"right-angle-polygon\",\"{7d3e17cf-30dd-4593-9bd8-0b2b8770f52a}\":\"split\",\"{e00209dd-05c5-4424-be62-51581f9f811d}\":\"stream-line\",\"{6c6970a7-5ca9-448c-9c7d-0d716cd2ac64}\":\"stream-polygon\",\"{e22f7d98-007d-427c-8282-13704f7c84c3}\":\"trace\",\"{6cf59352-8e14-402c-8f4c-ed72647f5e42}\":\"two-point-line\"});export{c as namedEditingToolGUIDDict};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport t from\"../../Graphic.js\";import e from\"../../core/Error.js\";import r from\"../../core/Logger.js\";import{getMetersPerCartesianUnitForSR as a}from\"../../core/unitUtils.js\";import{parseData as o}from\"../../core/urlUtils.js\";import{isEqualBaseGCS as s,canProjectWithoutEngine as n,projectWithoutEngine as l}from\"../../geometry/projection.js\";import{fromJSON as i}from\"../../geometry/support/jsonUtils.js\";import u from\"../../geometry/support/MeshTransform.js\";import{equals as d}from\"../../geometry/support/spatialReferenceUtils.js\";import{isFeatureIdentifierArrayWithGlobalId as c,isFeatureIdentifierArrayWithObjectId as p}from\"./editingSupport.js\";async function m(t,e,r){const{geometry:o}=e,i={...e.attributes};if(null!=r&&\"mesh\"===o?.type){const{transformFieldRoles:e}=r,{origin:c,spatialReference:p,vertexSpace:m}=o,f=o.transform??new u,g=\"local\"===m.type,b=t.spatialReference,y=b.isGeographic,R=d(b,p),h=s(p,b)&&n(p,b);if(!(g&&y&&h||!g&&!y&&R))return null;const I=l(c,p,b);if(null==I)return null;if(i[e.originX]=I.x,i[e.originY]=I.y,i[e.originZ]=I.z??0,null!=f){const{translation:t,scale:r,rotation:o}=f,s=g?1:a(p)/a(b);i[e.translationX]=t[0]*s,i[e.translationY]=t[2]*s,i[e.translationZ]=-t[1]*s,i[e.scaleX]=r[0],i[e.scaleY]=r[2],i[e.scaleZ]=r[1],i[e.rotationX]=o[0],i[e.rotationY]=o[2],i[e.rotationZ]=-o[1],i[e.rotationDeg]=o[3]}return{attributes:i}}return null==o?{attributes:i}:\"mesh\"===o.type||\"extent\"===o.type?null:{geometry:o.toJSON(),attributes:i}}async function f(t,e){const r=await Promise.all((e.addAttachments??[]).map((e=>g(t,e)))),a=await Promise.all((e.updateAttachments??[]).map((e=>g(t,e)))),o=e.deleteAttachments??[];return r.length||a.length||o.length?{adds:r,updates:a,deletes:[...o]}:null}async function g(t,e){const{feature:r,attachment:a}=e,{globalId:s,name:n,contentType:l,data:i,uploadId:u}=a,d={globalId:s};if(r&&(\"attributes\"in r?d.parentGlobalId=r.attributes?.[t.globalIdField]:r.globalId&&(d.parentGlobalId=r.globalId)),u)d.uploadId=u;else if(i){const t=await o(i);t&&(d.contentType=t.mediaType,d.data=t.data),i instanceof File&&(d.name=i.name)}return n&&(d.name=n),l&&(d.contentType=l),d}function b(t,e,r){if(!e||0===e.length)return[];if(r&&c(e))return e.map((t=>t.globalId));if(p(e))return e.map((t=>t.objectId));const a=r?t.globalIdField:t.objectIdField;return a?e.map((t=>t.getAttribute(a))):[]}function y(t){const e=t?.assetMaps;if(e){for(const t of e.addResults)t.success||r.getLogger(\"esri.layers.graphics.sources.support.sourceUtils\").error(`Failed to map asset to feature with globalId ${t.globalId}.`);for(const t of e.updateResults)t.success||r.getLogger(\"esri.layers.graphics.sources.support.sourceUtils\").error(`Failed to map asset to feature with globalId ${t.globalId}.`)}const a=t?.attachments,o={addFeatureResults:t?.addResults?.map(R)??[],updateFeatureResults:t?.updateResults?.map(R)??[],deleteFeatureResults:t?.deleteResults?.map(R)??[],addAttachmentResults:a?.addResults?a.addResults.map(R):[],updateAttachmentResults:a?.updateResults?a.updateResults.map(R):[],deleteAttachmentResults:a?.deleteResults?a.deleteResults.map(R):[]};return t?.editMoment&&(o.editMoment=t.editMoment),o}function R(t){const r=!0===t.success?null:t.error||{code:void 0,description:void 0};return{objectId:t.objectId,globalId:t.globalId,error:r?new e(\"feature-layer-source:edit-failure\",r.description,{code:r.code}):null}}function h(e,r){return new t({attributes:e.attributes,geometry:i({...e.geometry,spatialReference:r})})}function I(t,e){return{adds:t?.adds?.map((t=>h(t,e)))||[],updates:t?.updates?.map((t=>({original:h(t[0],e),current:h(t[1],e)})))||[],deletes:t?.deletes?.map((t=>h(t,e)))||[],spatialReference:e}}function j(t){const e=t.details.raw,r=+e.code,a=+e.extendedCode;return 500===r&&(-2147217144===a||-2147467261===a)}export{I as createEditedFeatures,R as createFeatureEditResult,f as getAttachmentEditsJSON,b as getFeatureIds,m as getFeatureJSON,j as isProtectedOrPrivateVersionError,y as unpackEditResultData};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../chunks/tslib.es6.js\";import o from\"../../core/JSONSupport.js\";import{property as e}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/RandomLCG.js\";import{reader as r}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";import{namedEditingToolGUIDDict as p}from\"./support/toolNames.js\";let a=class extends o{constructor(t){super(t),this.type=\"feature\",this.templateId=null,this.defaultTool=null,this.description=null,this.globalId=\"\",this.hash=\"\",this.layerIds=[],this.name=\"\",this.subtypeCode=null,this.status=null,this.userIdentity=null,this.tags=[],this.visible=!0}readThumbnail(t){return null==t||\"\"===t?null:{contentType:\"png\",imageData:t,height:64,width:64}}readDefaultTool(t){return null==t?null:p.fromJSON(t.toLowerCase())}readLayerIds(t,o){return null!=o.layerIds?o.layerIds.split(\",\").map((t=>parseInt(t.trim(),10))):null!=o.layerId?[o.layerId]:[]}readTags(t,o){const e=o.tag;return null==e?[]:e.split(\";\").map((t=>t.trim()))}};t([e()],a.prototype,\"type\",void 0),t([e({json:{read:!1,write:!1}})],a.prototype,\"featureService\",void 0),t([e()],a.prototype,\"thumbnail\",void 0),t([r(\"thumbnail\")],a.prototype,\"readThumbnail\",null),t([e()],a.prototype,\"templateId\",void 0),t([e()],a.prototype,\"defaultTool\",void 0),t([r(\"defaultTool\")],a.prototype,\"readDefaultTool\",null),t([e()],a.prototype,\"description\",void 0),t([e()],a.prototype,\"globalId\",void 0),t([e()],a.prototype,\"hash\",void 0),t([e()],a.prototype,\"layerIds\",void 0),t([r(\"layerIds\",[\"layerIds\",\"layerId\"])],a.prototype,\"readLayerIds\",null),t([e()],a.prototype,\"name\",void 0),t([e({json:{name:\"subtype\"}})],a.prototype,\"subtypeCode\",void 0),t([e()],a.prototype,\"status\",void 0),t([e()],a.prototype,\"userIdentity\",void 0),t([e()],a.prototype,\"tags\",void 0),t([r(\"tags\",[\"tag\"])],a.prototype,\"readTags\",null),t([e()],a.prototype,\"visible\",void 0),a=t([s(\"esri.editing.sharedTemplates.SharedTemplateMetadata\")],a);const l=a;export{l as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport e from\"../../Graphic.js\";import t from\"../../core/Collection.js\";import a from\"../../core/Error.js\";import{clone as r}from\"../../core/lang.js\";import s from\"../../core/Logger.js\";import{createResolver as i}from\"../../core/promiseUtils.js\";import{dataComponents as n}from\"../../core/urlUtils.js\";import{generateBracedUUID as o}from\"../../core/uuid.js\";import{normalizeCentralMeridian as l}from\"../../geometry/support/normalizeUtils.js\";import{isGeographic as d,equals as u,isWGS84 as p,isWebMercator as c}from\"../../geometry/support/spatialReferenceUtils.js\";import{isEditBusLayer as h,emitApplyEditsEvent as m}from\"../mixins/EditBusLayer.js\";import{isValidFieldValue as f}from\"../support/fieldUtils.js\";import{isGlbSupportedEditFormat as y}from\"../support/infoFor3D.js\";import{getEffectiveEditingEnabled as g,getEffectiveLayerCapabilities as b}from\"../support/layerUtils.js\";function w(e){return null!=e?.applyEdits}function F(e){return\"object\"==typeof e&&null!=e&&\"objectId\"in e&&!!e.objectId}function A(e){return e.every(F)}function v(e){return\"object\"==typeof e&&null!=e&&\"globalId\"in e&&!!e.globalId}function I(e){return e.every(v)}async function $(e,t,a,s={}){let n;const o=\"gdbVersion\"in e?e.gdbVersion:null,l=s.gdbVersion??o;if(h(e)&&e.url)n=m(e.url,e.layerId,l,\"original-and-current-features\"===s.returnServiceEditsOption);else{n=i(),n.promise.then((t=>{(t.addedFeatures.length||t.updatedFeatures.length||t.deletedFeatures.length||t.addedAttachments.length||t.updatedAttachments.length||t.deletedAttachments.length)&&e.emit(\"edits\",t)}));const t={result:n.promise};e.emit(\"apply-edits\",t)}try{const{results:i,edits:o}=await E(e,t,a,s),l=e=>e.filter((e=>!e.error)).map(r),d={edits:o,addedFeatures:l(i.addFeatureResults),updatedFeatures:l(i.updateFeatureResults),deletedFeatures:l(i.deleteFeatureResults),addedAttachments:l(i.addAttachmentResults),updatedAttachments:l(i.updateAttachmentResults),deletedAttachments:l(i.deleteAttachmentResults),exceededTransferLimit:!1,historicMoment:i.editMoment?new Date(i.editMoment):null,globalIdToObjectId:s.globalIdToObjectId};return i.editedFeatureResults?.length&&(d.editedFeatures=i.editedFeatureResults),n.resolve(d),i}catch(d){throw n.reject(d),d}}async function E(e,t,r,s){if(await e.load(),!w(t))throw new a(`${e.type}-layer:no-editing-support`,\"Layer source does not support applyEdits capability\",{layer:e});if(!g(e))throw new a(`${e.type}-layer:editing-disabled`,\"Editing is disabled for layer\",{layer:e});const{edits:i,options:n}=await S(e,r,s);return i.addFeatures?.length||i.updateFeatures?.length||i.deleteFeatures?.length||i.addAttachments?.length||i.updateAttachments?.length||i.deleteAttachments?.length?{edits:i,results:await t.applyEdits(i,n)}:{edits:i,results:{addFeatureResults:[],updateFeatureResults:[],deleteFeatureResults:[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}}async function S(e,t,r){const i=b(e),n=t&&(t.addFeatures||t.updateFeatures||t.deleteFeatures),o=t&&(t.addAttachments||t.updateAttachments||t.deleteAttachments),l=null!=e.infoFor3D;if(V(t,i,r,!!n,!!o,`${e.type}-layer`),!i.data.isVersioned&&r?.gdbVersion)throw new a(`${e.type}-layer:invalid-parameter`,\"'gdbVersion' is applicable only if the layer supports versioned data. See: 'capabilities.data.isVersioned'\");if(!i.editing.supportsRollbackOnFailure&&r?.rollbackOnFailureEnabled)throw new a(`${e.type}-layer:invalid-parameter`,\"This layer does not support 'rollbackOnFailureEnabled' parameter. See: 'capabilities.editing.supportsRollbackOnFailure'\");const d={...r};if(null!=d.rollbackOnFailureEnabled||i.editing.supportsRollbackOnFailure||(d.rollbackOnFailureEnabled=!0),d.rollbackOnFailureEnabled||\"original-and-current-features\"!==d.returnServiceEditsOption||(!1===d.rollbackOnFailureEnabled&&s.getLogger(\"esri.layers.graphics.editingSupport\").warn(`${e.type}-layer:invalid-parameter`,\"'original-and-current-features' is valid for 'returnServiceEditsOption' only when 'rollBackOnFailure' is true, but 'rollBackOnFailure' was set to false. 'rollBackOnFailure' has been overwritten and set to true.\"),d.rollbackOnFailureEnabled=!0),!i.editing.supportsReturnServiceEditsInSourceSpatialReference&&d.returnServiceEditsInSourceSR)throw new a(`${e.type}-layer:invalid-parameter`,\"This layer does not support 'returnServiceEditsInSourceSR' parameter. See: 'capabilities.editing.supportsReturnServiceEditsInSourceSpatialReference'\");if(d.returnServiceEditsInSourceSR&&\"original-and-current-features\"!==d.returnServiceEditsOption)throw new a(`${e.type}-layer:invalid-parameter`,\"'returnServiceEditsInSourceSR' is valid only when 'returnServiceEditsOption' is set to 'original-and-current-features'\");const u=G(t,i,`${e.type}-layer`),p=r?.globalIdUsed||l,c=e.fields.filter((e=>\"big-integer\"===e.type||\"oid\"===e.type&&(e.length||0)>=8));if(p){const{globalIdField:t}=e;if(null==t)throw new a(`${e.type}-layer:invalid-parameter`,\"Layer does not specify a global id field.\");u.addFeatures.forEach((e=>B(e,t)))}u.addFeatures.forEach((t=>O(t,e,p,c))),u.updateFeatures.forEach((t=>k(t,e,p,c))),u.deleteFeatures.forEach((t=>U(t,e,p,c))),u.addAttachments.forEach((t=>L(t,e))),u.updateAttachments.forEach((t=>L(t,e))),l&&await x(u,e);return{edits:await T(u),options:d}}function R(e,t,r,s){if(r){if(\"attributes\"in e&&!e.attributes[t.globalIdField])throw new a(`${t.type}-layer:invalid-parameter`,`Feature should have '${t.globalIdField}' when 'globalIdUsed' is true`);if(!(\"attributes\"in e)&&!e.globalId)throw new a(`${t.type}-layer:invalid-parameter`,\"`'globalId' of the feature should be passed when 'globalIdUsed' is true\")}if(s.length&&\"attributes\"in e)for(const i of s){const r=e.attributes[i.name];if(void 0!==r&&!f(i,r))throw new a(`${t.type}-layer:invalid-parameter`,`Big-integer field '${i.name}' of the feature must be less than ${Number.MAX_SAFE_INTEGER}`,{feature:e})}if(\"geometry\"in e&&null!=e.geometry){if(e.geometry.hasZ&&!1===t.capabilities?.data.supportsZ)throw new a(`${t.type}-layer:z-unsupported`,\"Layer does not support z values while feature has z values.\");if(e.geometry.hasM&&!1===t.capabilities?.data.supportsM)throw new a(`${t.type}-layer:m-unsupported`,\"Layer does not support m values while feature has m values.\")}}function j(e,t){if(\"geometry\"in e&&\"mesh\"===e.geometry?.type&&null!=t.infoFor3D&&null!=t.spatialReference){const{geometry:r}=e,{spatialReference:s,vertexSpace:i}=r,n=t.spatialReference,o=\"local\"===i.type,l=d(n),h=u(n,s),m=h||p(n)&&(p(s)||c(s));if(!(o&&l&&m||!o&&!l&&h))throw new a(`${t.type}-layer:mesh-unsupported`,`Uploading a mesh with a ${i.type} vertex space and a spatial reference wkid:${s.wkid} to a layer with a spatial reference wkid:${n.wkid} is not supported.`)}}function O(e,t,a,r){R(e,t,a,r),j(e,t)}function U(e,t,a,r){R(e,t,a,r)}function k(e,t,r,s){R(e,t,r,s),j(e,t);const i=b(t);if(\"geometry\"in e&&null!=e.geometry&&!i?.editing.supportsGeometryUpdate)throw new a(`${t.type}-layer:unsupported-operation`,\"Layer does not support geometry updates.\")}function L(e,t){const{feature:r,attachment:s}=e;if(!r||\"attributes\"in r&&!r.attributes[t.globalIdField])throw new a(`${t.type}-layer:invalid-parameter`,\"Attachment should have reference to a feature with 'globalId'\");if(!(\"attributes\"in r)&&!r.globalId)throw new a(`${t.type}-layer:invalid-parameter`,\"Attachment should have reference to 'globalId' of the parent feature\");if(!s.globalId)throw new a(`${t.type}-layer:invalid-parameter`,\"Attachment should have 'globalId'\");if(!s.data&&!s.uploadId)throw new a(`${t.type}-layer:invalid-parameter`,\"Attachment should have 'data' or 'uploadId'\");if(!(s.data instanceof File&&!!s.data.name)&&!s.name)throw new a(`${t.type}-layer:invalid-parameter`,\"'name' is required when attachment is specified as Base64 encoded string using 'data'\");if(!t.capabilities?.editing.supportsUploadWithItemId&&s.uploadId)throw new a(`${t.type}-layer:invalid-parameter`,\"This layer does not support 'uploadId' parameter. See: 'capabilities.editing.supportsUploadWithItemId'\");if(\"string\"==typeof s.data){const e=n(s.data);if(e&&!e.isBase64)throw new a(`${t.type}-layer:invalid-parameter`,\"Attachment 'data' should be a Blob, File or Base64 encoded string\")}}function B(e,t){const{attributes:a}=e;null==a[t]&&(a[t]=o())}async function T(e){const t=e.addFeatures??[],a=e.updateFeatures??[],r=t.concat(a).map((e=>e.geometry)),s=await l(r),i=t.length,n=a.length;return s.slice(0,i).forEach(((e,a)=>t[a].geometry=e)),s.slice(i,i+n).forEach(((e,t)=>a[t].geometry=e)),e}function D(e){return{addFeatures:Array.from(e?.addFeatures??[]),updateFeatures:Array.from(e?.updateFeatures??[]),deleteFeatures:e&&t.isCollection(e.deleteFeatures)?e.deleteFeatures.toArray():e.deleteFeatures||[],addAttachments:e.addAttachments||[],updateAttachments:e.updateAttachments||[],deleteAttachments:e.deleteAttachments||[]}}function G(e,t,r){const s=D(e);if(s.addFeatures?.length&&!t.operations.supportsAdd)throw new a(`${r}:unsupported-operation`,\"Layer does not support adding features.\");if(s.updateFeatures?.length&&!t.operations.supportsUpdate)throw new a(`${r}:unsupported-operation`,\"Layer does not support updating features.\");if(s.deleteFeatures?.length&&!t.operations.supportsDelete)throw new a(`${r}:unsupported-operation`,\"Layer does not support deleting features.\");return s.addFeatures=s.addFeatures.map(M),s.updateFeatures=s.updateFeatures.map(M),s.addAssetFeatures=[],s}function V(e,t,r,s,i,n){if(!e||!s&&!i)throw new a(`${n}:missing-parameters`,\"'addFeatures', 'updateFeatures', 'deleteFeatures', 'addAttachments', 'updateAttachments' or 'deleteAttachments' parameter is required\");if(!t.editing.supportsGlobalId&&r?.globalIdUsed&&!r.usingFeatureServiceEndpoint)throw new a(`${n}:invalid-parameter`,\"This layer does not support 'globalIdUsed' parameter. See: 'capabilities.editing.supportsGlobalId'\");if(!t.editing.supportsGlobalId&&i)throw new a(`${n}:invalid-parameter`,\"'addAttachments', 'updateAttachments' and 'deleteAttachments' are applicable only if the layer supports global ids. See: 'capabilities.editing.supportsGlobalId'\");if(!r?.globalIdUsed&&i)throw new a(`${n}:invalid-parameter`,\"When 'addAttachments', 'updateAttachments' or 'deleteAttachments' is specified, globalIdUsed should be set to true\")}function M(t){const a=new e;return t.attributes||(t.attributes={}),a.geometry=t.geometry,a.attributes=t.attributes,a}async function x(e,t){const{infoFor3D:r}=t;if(null==r)return;if(!y(r))throw new a(`${t.type}-layer:binary-gltf-asset-not-supported`,\"3DObjectFeatureLayer requires binary glTF (.glb) support for updating mesh geometry.\");e.addAssetFeatures??=[];const{addAssetFeatures:s}=e;for(const a of e.addFeatures??[])z(a)&&s.push(a);for(const a of e.updateFeatures??[])z(a)&&s.push(a)}function z(e){return\"mesh\"===e?.geometry?.type}function q(e,t,r,s){if(!w(t))throw new a(`${e.type}-layer:no-editing-support`,\"Layer source does not support applyEdits capability\",{layer:e});if(!t.uploadAssets)throw new a(`${e.type}-layer:no-asset-upload-support`,\"Layer source does not support uploadAssets capability\",{layer:e});return t.uploadAssets(r,s)}export{$ as applyEdits,V as checkEditingCapabilities,I as isFeatureIdentifierArrayWithGlobalId,A as isFeatureIdentifierArrayWithObjectId,v as isFeatureIdentifierWithGlobalId,F as isFeatureIdentifierWithObjectId,D as normalizeCollections,G as normalizeEdits,T as normalizeGeometries,M as shallowCloneFeature,q as uploadAssets};\n"],"names":["a","e","Array","isArray","join","Q","t","s","id","name","url","type","H","isDataVersioned","q","isDataBranchVersioned","B","toLowerCase","split","map","trim","r","includes","i","datesInUnknownTimezone","o","n","supportsAdd","supportsDelete","supportsEditing","supportsChangeTracking","supportsQuery","supportsQueryDataElements","supportsQueryDomains","supportsQueryContingentValues","supportsSync","supportsUpdate","$","maxRecordCountFactor","L","maxRecordCount","G","advancedEditingCapabilities","supportsAsyncApplyEdits","supportsGlobalId","supportsReturnServiceEditsInSourceSpatialReference","supportsSharedTemplates","supportsSplit","z","syncCapabilities","supportedSyncDataOptions","supportsAsync","annotations","dimensions","contingentValues","attributeRules","utilityNetworkSystem","annotationFullModel","include3DObjects","utilityNetworkMissingLayers","preserveTrueCurves","Z","JSONSupportMixin","IdentifiableMixin","u","constructor","super","this","sourceJSON","userHasFullEditingPrivileges","userHasUpdateItemPrivileges","userTypeExtensions","layerInfos","tableInfos","capabilities","read","utilityNetworkUrl","layers","versionManagementServiceUrl","hasBranchVersionedData","D","replace","readLayerInfos","geometryType","readTableInfos","tables","readCapabilities","data","sync","operations","query","editing","W","effectiveCapabilities","l","load","addResolvingPromise","_fetchService","then","_setUserPrivileges","Promise","resolve","fetchAllLayersAndTables","_fetchLayersAndTablesPromise","_fetchLayersAndTables","p","applyEdits","results","edits","editedFeatures","_internalApplyEdits","filter","error","R","gdbVersion","addedFeatures","addFeatureResults","updatedFeatures","updateFeatureResults","deletedFeatures","deleteFeatureResults","addedAttachments","addAttachmentResults","updatedAttachments","updateAttachmentResults","deletedAttachments","deleteAttachmentResults","exceededTransferLimit","historicMoment","editMoment","Date","length","reject","querySharedTemplates","templateIds","async","_ref","serviceUrl","requestOptions","f","tags","responseType","templates","N","h","fromJSON","featureService","userPrivilegesApplied","features","fullEdit","content","updateItem","_fetchUserPrivileges","serviceItemId","_set","d","edit","T","signal","getCredential","prompt","C","portal","user","O","A","globalIdUsed","spatialReference","options","_processApplyEditsParams","all","addFeatures","g","updateFeatures","v","identifierFields","deleteFeatures","M","c","b","m","adds","updates","deletes","attachments","rollbackOnFailure","useGlobalIds","returnEditMoment","honorSequenceOfEdits","usePreviousEditMoment","returnServiceEditsInSourceSR","returnServiceEditsOption","_","x","JSON","stringify","P","V","k","method","authMode","sessionId","J","y","S","K","usingFeatureServiceEndpoint","addAttachments","updateAttachments","deleteAttachments","w","I","F","U","addResults","updateResults","deleteResults","E","wkid","wkt","latestWkid","latestVcsWkid","vcsWkid","j","push","layerId","prototype","readOnly","json","source","X","geometry","attributes","transformFieldRoles","origin","vertexSpace","transform","isGeographic","originX","originY","originZ","translation","scale","rotation","translationX","translationY","translationZ","scaleX","scaleY","scaleZ","rotationX","rotationY","rotationZ","rotationDeg","toJSON","feature","attachment","globalId","contentType","uploadId","parentGlobalId","globalIdField","mediaType","File","objectId","objectIdField","getAttribute","assetMaps","success","getLogger","code","description","original","current","details","raw","extendedCode","templateId","defaultTool","hash","layerIds","subtypeCode","status","userIdentity","visible","readThumbnail","imageData","height","width","readDefaultTool","readLayerIds","parseInt","readTags","tag","write","every","arguments","undefined","promise","emit","result","layer","infoFor3D","isVersioned","supportsRollbackOnFailure","rollbackOnFailureEnabled","warn","fields","forEach","supportsGeometryUpdate","addAssetFeatures","globalIdToObjectId","editedFeatureResults","Number","MAX_SAFE_INTEGER","hasZ","supportsZ","hasM","supportsM","supportsUploadWithItemId","isBase64","concat","slice","from","isCollection","toArray","uploadAssets"],"sourceRoot":""}